import numpy as np

def calculate_metrics(data):
    total_distance = {}
    mode_times = {}
    
    for i in range(len(data) - 1):
        x1, y1, mode1, time1 = data[i]
        x2, y2, mode2, time2 = data[i + 1]
        
        # 유클리드 거리 계산
        distance = np.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
        
        # 모드별 이동 거리와 계산 시간 누적
        if mode1 not in total_distance:
            total_distance[mode1] = 0
            mode_times[mode1] = 0
        total_distance[mode1] += distance
        mode_times[mode1] += time1
    
    # 마지막 데이터 포인트의 계산 시간 추가
    last_mode, last_time = data[-1][2], data[-1][3]
    if last_mode not in mode_times:
        mode_times[last_mode] = 0
    mode_times[last_mode] += last_time
    
    # 모드별 1미터당 평균 계산 시간 계산
    mode_time_per_meter = {mode: (mode_times[mode] / total_distance[mode]) if total_distance[mode] > 0 else 0 
                           for mode in mode_times}
    
    return total_distance, mode_times, mode_time_per_meter

# 주어진 데이터
raw_data = [
    (-45.56780242919922,-57.69471740722656,False,0.0001049041748046875),
    (-44.75833511352539,-57.68296432495117,False,0.0049092769622802734),
(-43.633270263671875,-57.67445373535156,False,0.0009362697601318359),
(-42.38860321044922,-57.67515182495117,False,0.001500844955444336),
(-40.99391555786133,-57.67050552368164,False,0.0015540122985839844),
(-39.50827407836914,-57.6727294921875,False,0.00017571449279785156),
(-37.57975387573242,-57.66425323486328,False,0.0011374950408935547),
(-35.98936080932617,-57.65691375732422,False,0.00021314620971679688),
(-34.30491256713867,-57.65529251098633,False,0.0001227855682373047),
(-32.547035217285156,-57.656982421875,False,0.00020647048950195312),
(-30.22401237487793,-57.654319763183594,False,0.0001506805419921875),
(-28.25848388671875,-57.64564895629883,False,0.0007712841033935547),
(-25.633590698242188,-57.62721252441406,False,0.00016927719116210938),
(-23.38440704345703,-57.60770034790039,False,0.00010561943054199219),
(-20.48643684387207,-57.58602523803711,False,0.0011630058288574219),
(-17.452184677124023,-57.57697296142578,False,0.0011327266693115234),
(-15.020966529846191,-57.578407287597656,False,0.00011324882507324219),
(-11.88889217376709,-57.5841064453125,False,0.0001266002655029297),
(-9.245794296264648,-57.59243392944336,False,0.008327722549438477),
(-6.582952499389648,-57.61031723022461,False,0.0007686614990234375),
(-3.907916784286499,-57.64677047729492,False,0.0013303756713867188),
(-0.8184588551521301,-57.70363235473633,False,0.001119375228881836),
(1.4646885395050049,-57.739990234375,False,0.0009796619415283203),
(4.014605522155762,-57.77392578125,False,0.00011086463928222656),
(6.244633197784424,-57.81214141845703,False,0.001745462417602539),
(7.84714412689209,-57.75778579711914,False,0.00011706352233886719),
(9.305586814880371,-57.68761444091797,False,8.249282836914062e-05),
(11.024515151977539,-57.61229705810547,False,0.00951695442199707),
(12.274166107177734,-57.55563735961914,False,0.0001347064971923828),
(13.43359375,-57.50510787963867,False,0.0001404285430908203),
(14.745600700378418, -57.45054626464844, False, 0.00019216537475585938),
(15.474859237670898, -57.42081832885742, False, 0.00014281272888183594),
(16.603132247924805, -57.37191390991211, False, 0.0012373924255371094),
(17.45518684387207, -57.33351135253906, False, 8.988380432128906e-05),
(18.21674156188965, -57.29949951171875, False, 0.00015544891357421875),
(18.96150779724121, -57.309749603271484, False, 0.000978708267211914),
(19.821109771728516, -57.30337142944336, False, 0.00015783309936523438),
(20.83587646484375, -57.289886474609375, False, 0.000179290771484375),
(21.741361618041992, -57.275882720947266, False, 9.226799011230469e-05),
(22.416767120361328, -57.26520919799805, False, 0.0022706985473632812),
(23.07123565673828, -57.25563049316406, False, 0.0013225078582763672),
(24.069623947143555, -57.242889404296875, False, 0.00013637542724609375),
(25.508955001831055, -57.22408676147461, False, 0.00119781494140625),
(26.64706802368164, -57.20762634277344, False, 0.0011630058288574219),
(27.077926635742188, -57.20096206665039, False, 0.0001811981201171875),
(28.350299835205078, -57.221527099609375, False, 9.5367431640625e-05),
(29.705894470214844, -57.23957061767578, False, 8.416175842285156e-05),
(31.045394897460938, -57.25490188598633, False, 9.393692016601562e-05),
(32.51224136352539, -57.27156066894531, False, 0.00023746490478515625),
(34.76373291015625, -57.29606246948242, False, 0.0009636878967285156),
(36.81343460083008, -57.31769943237305, False, 0.00010728836059570312),
(38.95736312866211, -57.34049606323242, False, 0.00010323524475097656),
(40.743717193603516, -57.3599739074707, False, 0.00010800361633300781),
(43.58897018432617, -57.39176559448242, False, 0.00020456314086914062),
(46.04916000366211, -57.41754913330078, False, 0.0010704994201660156),
(48.12696075439453, -57.42335891723633, False, 0.0011267662048339844),
(50.201194763183594, -57.410316467285156, True, 0.0009310245513916016),
(50.74972915649414, -57.4063720703125, True, 0.03130817413330078),
(51.29084777832031, -57.40412521362305, True, 0.06362032890319824),
(51.8226318359375, -57.40290451049805, True, 0.06719827651977539),
(52.35590362548828, -57.40227508544922, True, 0.07687544822692871),
(52.89966583251953, -57.40199279785156, True, 0.06497979164123535),
(53.39398956298828, -57.40187072753906, True, 0.06409525871276855),
(53.91594696044922, -57.40180587768555, True, 0.07903337478637695),
(54.42014694213867, -57.40174865722656, True, 0.06626725196838379),
(54.90034103393555, -57.40168380737305, True, 0.0664215087890625),
(55.37374496459961, -57.4015998840332, True, 0.07618284225463867),
(55.83457946777344, -57.40149688720703, True, 0.06400537490844727),
(56.26850128173828, -57.40140151977539, True, 0.06532716751098633),
(56.693626403808594, -57.401302337646484, True, 0.06561517715454102),
(57.12042236328125, -57.40120315551758, True, 0.07710886001586914),
(57.54549789428711, -57.40108871459961, True, 0.06296515464782715),
(57.97195816040039, -57.40097427368164, True, 0.08016395568847656),
(58.35086441040039, -57.40087127685547, True, 0.06497359275817871),
(58.72232437133789, -57.40077209472656, True, 0.06523609161376953),
(59.08804702758789, -57.40066909790039, True, 0.061635732650756836),
(59.4426383972168, -57.40057373046875, True, 0.06598496437072754),
(59.8173828125, -57.40049743652344, True, 0.07845926284790039),
(60.14702606201172, -57.39980697631836, True, 0.0626533031463623),
(60.47825241088867, -57.39836883544922, True, 0.06392407417297363),
(60.80954360961914, -57.39649963378906, True, 0.06798100471496582),
(61.13796615600586, -57.39424514770508, True, 0.06237363815307617),
(61.45853042602539, -57.39183807373047, True, 0.065460205078125),
(61.77413558959961, -57.389427185058594, True, 0.06515932083129883),
(62.0709114074707, -57.38718795776367, True, 0.06447577476501465),
(62.37763977050781, -57.38489532470703, True, 0.07674884796142578),
(62.657596588134766, -57.37989044189453, True, 0.062155961990356445),
(62.95328140258789, -57.37213134765625, True, 0.06267523765563965),
(63.221702575683594, -57.36458206176758, True, 0.06401824951171875),
(63.49972915649414, -57.35673522949219, True, 0.06559324264526367),
(63.77254104614258, -57.34913635253906, True, 0.06659531593322754),
(64.0557632446289, -57.34134292602539, True, 0.07581043243408203),
(64.33049011230469, -57.32929611206055, True, 0.06333231925964355),
(64.59628295898438, -57.31442642211914, True, 0.06469273567199707),
(64.85978698730469, -57.29904556274414, True, 0.06632566452026367),
(65.13115692138672, -57.283241271972656, True, 0.07654380798339844),
(65.39842987060547, -57.26779556274414, True, 0.06407809257507324),
(65.66603088378906, -57.25254440307617, True, 0.06743383407592773),
(65.92681121826172, -57.237796783447266, True, 0.07668137550354004),
(66.19426727294922, -57.21986389160156, True, 0.06495285034179688),
(66.46013641357422, -57.20020294189453, True, 0.06317448616027832),
(66.7235107421875, -57.18049240112305, True, 0.06441426277160645),
(66.99407196044922, -57.160282135009766, True, 0.07721519470214844),
(67.2624282836914, -57.14038848876953, True, 0.06410026550292969),
(67.52589416503906, -57.1209716796875, True, 0.0662531852722168),
(67.79251098632812, -57.10146713256836, True, 0.07765746116638184),
(68.04759979248047, -57.07772445678711, True, 0.0637667179107666),
(68.32556915283203, -57.04648208618164, True, 0.06465721130371094),
(68.5965347290039, -57.01498031616211, True, 0.07805991172790527),
(68.85911560058594,-56.98448944091797,True,0.06606650352478027),
(69.12527465820312,-56.95380401611328,True,0.06290221214294434),
(69.39044952392578,-56.92349624633789,True,0.08001208305358887),
(69.65534210205078,-56.88703918457031,True,0.06389260292053223),
(69.91011047363281,-56.84601974487305,True,0.06389474868774414),
(70.1748046875,-56.80203628540039,True,0.06552481651306152),
(70.45631408691406,-56.75514602661133,True,0.07897090911865234),
(70.71964263916016,-56.7115478515625,True,0.06267833709716797),
(71.00804138183594,-56.66413497924805,True,0.07986187934875488),
(71.28302001953125,-56.611854553222656,True,0.0630340576171875),
(71.5460205078125,-56.55512619018555,True,0.0785069465637207),
(71.80133819580078,-56.49888610839844,True,0.06552243232727051),
(72.06814575195312,-56.440067291259766,True,0.06565213203430176),
(72.33403778076172,-56.38172912597656,True,0.07685613632202148),
(72.60631561279297,-56.32234573364258,True,0.06402158737182617),
(72.87801361083984,-56.25625991821289,True,0.07911014556884766),
(73.14381408691406,-56.18550491333008,True,0.06409120559692383),
(73.41673278808594,-56.11177062988281,True,0.0800025463104248),
(73.68050384521484,-56.04062271118164,True,0.06588387489318848),
(73.94775390625,-55.96889877319336,True,0.06530952453613281),
(74.23684692382812,-55.89169692993164,True,0.07842779159545898),
(74.51277923583984,-55.81013870239258,True,0.07829022407531738),
(74.79695892333984,-55.71784210205078,True,0.08088302612304688),
(75.06208801269531,-55.63034439086914,True,0.06353044509887695),
(75.3432846069336,-55.53764343261719,True,0.07857203483581543),
(75.6247787475586,-55.445213317871094,True,0.07996916770935059),
(75.8863296508789,-55.359764099121094,True,0.06660580635070801),
(76.15052795410156,-55.273826599121094,True,0.0774075984954834),
(76.41033172607422,-55.18387985229492,True,0.06482958793640137),
(76.66741943359375,-55.09067153930664,True,0.07004213333129883),
(76.87281799316406,-55.01576232910156,True,0.056710004806518555),
(77.0849609375,-54.938514709472656,True,0.05861234664916992),
(77.2991714477539,-54.860687255859375,True,0.059052228927612305),
(77.50041198730469,-54.787723541259766,True,0.055553436279296875),
]

total_distance, mode_times, mode_time_per_meter = calculate_metrics(raw_data)
print("모드별 총 거리:", total_distance)
print("모드별 총 계산시간:", mode_times)
print("모드별 1미터당 평균 계산 시간:", mode_time_per_meter)
